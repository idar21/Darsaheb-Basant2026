<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Basant Mela</title>

<style>
body {
  margin:0;
  overflow:hidden;
  background:#87CEEB;
  font-family:sans-serif;
  transition:1s ease;
}

.kite {
  position:absolute;
  width:90px;
  transition:0.3s;
  z-index:5;
}

#boom {
  position:fixed;
  left:0; top:0;
  width:100%; height:100%;
  pointer-events:none;
  z-index:50;
}

.burst {
  width:6px; height:6px;
  background:yellow;
  border-radius:50%;
  position:absolute;
  animation: explode 1.6s ease-out forwards;
  pointer-events:none;
}

@keyframes explode {
  0% { transform:scale(1); opacity:1; }
  100% { transform:scale(50); opacity:0; }
}

#dragKite {
  width:140px;
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  cursor:grab;
  z-index:20;
}

#lahoreSkyline {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 180px;
  pointer-events:none;
  background: url('neon-lahore-skyline.png') center/cover no-repeat;
  opacity: 0;
  transition: 1.2s ease;
  z-index: 9;
  filter: drop-shadow(0 0 18px yellow) drop-shadow(0 0 22px hotpink);
}

body.night {
  background:#000;
}

body.night #lahoreSkyline {
  opacity:1;
}

#toggleNight {
  position:fixed;
  padding:12px 20px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  z-index:999;
  bottom:20px;
  right:20px;
  background:#111;
  color:#fff;
}
</style>
</head>

<body>

<button id="toggleNight">Night Mode</button>

<div id="lahoreSkyline"></div>

<img src="kite.png" id="dragKite">

<div id="boom"></div>

<script>
document.getElementById("toggleNight")
.onclick = ()=> document.body.classList.toggle("night");

function makeKite() {
  const k = document.createElement("img");
  k.src = "kite.png";
  k.className = "kite";
  k.style.left = Math.random()*window.innerWidth + "px";
  k.style.top  = Math.random()*window.innerHeight + "px";
  document.body.appendChild(k);

  function move() {
    k.style.left = Math.random()*window.innerWidth + "px";
    k.style.top  = Math.random()*window.innerHeight + "px";
  }
  setInterval(move, 2300);
}

for (let i=0; i<20; i++) makeKite();

document.body.addEventListener("click", e => {
  if (e.target.id === "toggleNight") return;
  const b = document.createElement("div");
  b.className = "burst";
  b.style.left = e.clientX + "px";
  b.style.top = e.clientY + "px";
  boom.appendChild(b);
  setTimeout(()=> b.remove(),1600);
});

const dk = document.getElementById("dragKite");
let drag=false;

dk.onmousedown = () => {
  drag=true;
  dk.style.cursor="grabbing";
};

document.onmouseup = () => {
  drag=false;
  dk.style.cursor="grab";
};

document.onmousemove = e => {
  if (!drag) return;
  dk.style.left = e.clientX + "px";
  dk.style.top  = e.clientY + "px";
};

setInterval(() => {
  const all = [...document.querySelectorAll(".kite")];
  all.forEach(k1 => {
    const r1 = k1.getBoundingClientRect();
    all.forEach(k2 => {
      if (k1 === k2) return;
      const r2 = k2.getBoundingClientRect();
      const hit = !(r1.right < r2.left ||
                    r1.left > r2.right ||
                    r1.bottom < r2.top ||
                    r1.top > r2.bottom);
      if (hit && Math.random()>0.5) k2.remove();
    });
  });
}, 500);
</script>

</body>
</html>
